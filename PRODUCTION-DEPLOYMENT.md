# ðŸš€ Production Deployment Guide

## Medusa Backend Deployment (Railway)

### 1. **Setup Railway Account**
1. Go to [railway.app](https://railway.app)
2. Sign up with GitHub
3. Connect your repository

### 2. **Deploy Medusa Backend**
1. Create new project in Railway
2. Add service from GitHub repo
3. Select the `/store` folder as root
4. Railway will auto-detect Node.js

### 3. **Add Database & Redis**
```bash
# In Railway dashboard, add services:
- PostgreSQL (automatically provisions)
- Redis (for session storage)
```

### 4. **Environment Variables**
Add these in Railway dashboard:
```env
# Auto-generated by Railway
DATABASE_URL=postgresql://...
REDIS_URL=redis://...

# Generate strong secrets
JWT_SECRET=<generate-64-char-random-string>
COOKIE_SECRET=<generate-64-char-random-string>

# Your domains
STORE_CORS=https://your-frontend.vercel.app
ADMIN_CORS=https://your-backend.railway.app
AUTH_CORS=https://your-backend.railway.app

# Production config
NODE_ENV=production
PORT=9000

# Admin user
ADMIN_EMAIL=admin@yourdomain.com
ADMIN_PASSWORD=YourSecurePassword123!
```

### 5. **Deploy & Test**
1. Railway will auto-deploy
2. Backend URL: `https://your-app.railway.app`
3. Admin dashboard: `https://your-app.railway.app/app`

## Frontend Deployment (Vercel)

### 1. **Update Environment Variables**
Update `.env.local` for production:
```env
# Production Medusa Backend
NEXT_PUBLIC_MEDUSA_URL=https://your-backend.railway.app
NEXT_PUBLIC_USE_REAL_MEDUSA=true

# Clerk (same keys)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_...
CLERK_SECRET_KEY=sk_test_...

# Stripe (add when ready)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_...
STRIPE_SECRET_KEY=sk_live_...
```

### 2. **Deploy to Vercel**
```bash
# Install Vercel CLI
npm i -g vercel

# Deploy
vercel --prod
```

### 3. **Update CORS**
Update Railway environment variables with your Vercel domain:
```env
STORE_CORS=https://your-app.vercel.app
```

## Database Setup

### 1. **Run Migrations**
```bash
# SSH into Railway container or use Railway CLI
npm run migrations

# Seed with your hat data
npm run seed
```

### 2. **Create Admin User**
Visit `https://your-backend.railway.app/app` and create admin account.

## Production Checklist

### Security
- [ ] Strong JWT/Cookie secrets
- [ ] HTTPS only
- [ ] Proper CORS origins
- [ ] Rate limiting enabled
- [ ] Input validation

### Performance
- [ ] Database indices
- [ ] Redis caching
- [ ] CDN for images
- [ ] Gzip compression

### Monitoring
- [ ] Error tracking (Sentry)
- [ ] Uptime monitoring
- [ ] Performance monitoring
- [ ] Log aggregation

## Cost Estimation

### Railway (Backend)
- **Hobby Plan**: $5/month
- **Pro Plan**: $20/month (recommended)
- PostgreSQL: $5/month
- Redis: $3/month
- **Total**: ~$28/month

### Vercel (Frontend)
- **Hobby**: Free (perfect for MVP)
- **Pro**: $20/month (when scaling)

### Total MVP Cost: ~$28/month

## Quick Deploy Commands

```bash
# 1. Deploy backend to Railway
git add .
git commit -m "Production ready Medusa backend"
git push origin main

# 2. Deploy frontend to Vercel
vercel --prod

# 3. Update environment variables in both platforms
```

## Production Ready Features

âœ… **E-commerce Core**
- Product catalog with Medusa
- Shopping cart with persistence
- User authentication with Clerk
- Payment processing with Stripe

âœ… **Performance**
- Server-side rendering
- Image optimization
- Code splitting
- Caching strategies

âœ… **Security**
- HTTPS enforcement
- CORS protection
- Input validation
- Rate limiting

âœ… **SEO & Analytics**
- Meta tags optimization
- Structured data
- Sitemap generation
- Google Analytics ready

This setup will handle thousands of users and millions in revenue! ðŸš€